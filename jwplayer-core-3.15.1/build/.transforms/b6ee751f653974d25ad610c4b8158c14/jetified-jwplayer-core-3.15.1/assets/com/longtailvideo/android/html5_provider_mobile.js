var jwcallbacks={};window.jwTriggerEvent=function(){var t=arguments[0],e=arguments[1],i=jwcallbacks[t][e];if(2==arguments.length)i();else{var s=[];Array.prototype.push.apply(s,arguments),s.shift(),s.shift(),i.apply(null,s)}},window.jwOn=function(t,e,i){void 0===jwcallbacks[t]&&(jwcallbacks[t]=[]),void 0===jwcallbacks[t][e]&&jwcallbacks[t].push(e),jwcallbacks[t][e]=i},window.jwOff=function(t,e){jwcallbacks[t][e]=null},function(t){function e(e,d){function c(){}function l(){}this._lastSeeked=null;var _=t(e).Events;i.extend(this,_,{_position:0,_currentTime:0,_duration:0,_restorePosition:-1,_beforecompleted:!1,_attached:!0,_multipleSource:!1,_currentQuality:-1,_levels:[],_tracks:[],_fullscreen:!1,_providerId:"id-"+u++,_previouslyLoadedItem:null,_currentItem:null,supportsPlaybackRate:!0,_seekableRange:{},_currentPlaybackRate:1,_bufferPercentage:0},{init:function(t){this._attached&&(this._levels=t.sources,this._currentQuality=this._pickInitialQuality(t.sources),this._position=t.starttime||0,this._currentTime=this._position,this._duration=t.duration||0,t.preload&&"none"==t.preload||this._completeLoad(t,this._position))},play:function(){if(this._attached)return this._currentItem||this.load(this._previouslyLoadedItem),a.play(),Promise.resolve()},pause:function(){if(this._attached)return a.pause(),this.setState(n.PAUSED),Promise.resolve()},load:function(t){if(this._attached)return this.sendMediaType(t.sources),this.setState(n.LOADING),this._multipleSource=t.sources.length>1,this._completeLoad(t,this._restorePosition),this._restorePosition=-1,Promise.resolve()},stop:function(){if(this._attached)return a.stop(),this.stopTickers(),this._currentItem=null,this.setState(n.IDLE),Promise.resolve()},seek:function(t){if(!(null!=this._lastSeeked&&t>this._currentTime&&t===this._lastSeeked)&&(this._lastSeeked=t,this._attached))return this.trigger(r.JWPLAYER_MEDIA_SEEK,{position:this._position,offset:t}),a.seek(t),Promise.resolve()},getPlaybackRate:function(){return this._currentPlaybackRate},setPlaybackRate:function(t){t!=this._currentPlaybackRate&&(a.setPlaybackRate(t),this._currentPlaybackRate=t)},setVisibility:c,setFullscreen:function(t){if(this._fullscreen=t,a.setFullscreen(t)){var e=document.createEvent("Event");e.initEvent("webkitfullscreenchange",!0,!0),document.dispatchEvent(e)}return t},getFullScreen:function(){return this._fullscreen},setContainer:l,isAudioFile:a.isAudioFile.bind(a),supportsFullscreen:s.constant(!0),getName:function(){return{name:o}},getCurrentTime:function(){return this._currentTime},getQualityLevels:function(){return this._levels},getCurrentQuality:function(){return this._currentQuality},setCurrentQuality:function(t){if(this._multipleSource){if(this._currentQuality===t)return;t>=0&&this._levels&&this._levels.length>t&&(this._currentQuality=t,this.trigger(r.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:t,levels:this._getPublicLevels(this._levels)}),this.stopTickers(),a.load(this._providerId,this._levels[this._currentQuality].file,this._levels[this._currentQuality].type,JSON.stringify(this._previouslyLoadedItem),JSON.stringify(this._levels[this._currentQuality].httpheaders),!1,this._position,!1,this._currentPlaybackRate),this.play())}else a.setCurrentQuality(t),this._currentQuality=t},getAudioTracks:a.getAudioTracks.bind(a),getCurrentAudioTrack:a.getCurrentAudioTrack.bind(a),setCurrentAudioTrack:a.setCurrentAudioTrack.bind(a),mute:a.mute.bind(a),setSubtitlesTrack:function(t){a.setSubtitlesTrack(t)},checkComplete:function(){return this._beforecompleted},attachMedia:function(t){this._attached=!0,this._restorePosition=this._position,this._beforecompleted&&this._playbackComplete()},detachMedia:function(){this._attached=!1,this._currentItem=null},tickTimer:function(){if(this._attached){var t=JSON.parse(a.getWebTickData()),e=t.position,i=t.currentTime,s=t.duration,n=t.bufferPercent,h=t.providerId,o=e!==this._position||i!==this._currentTime||s!==this._duration,u=0!=s,d=0!=e&&0!=i,c=h==this._providerId;o&&u&&c&&d&&(this._position=e,this._currentTime=i,this._duration=s,this.trigger(r.JWPLAYER_MEDIA_TIME,{position:this._position,currentTime:this._currentTime,duration:this._duration,seekRange:this._seekableRange,metadata:{currentTime:this._currentTime}})),n!==this._bufferPercentage&&u&&c&&(this._bufferPercentage=n,this.trigger(r.JWPLAYER_MEDIA_BUFFER,{bufferPercent:this._bufferPercentage,position:this._position,duration:this._duration,currentTime:this._currentTime,seekRange:this._seekableRange}))}},stopTimeTicker:function(){this.timeTicker&&(clearInterval(this.timeTicker),this.tickTimer(),this.timeTicker=!1)},startTimeTicker:function(){this._attached&&(this.stopTimeTicker(),this.timeTicker=setInterval(this.tickTimer.bind(this),a.getTickInterval()))},stopTickers:function(){this.stopTimeTicker()}},{sdkItemLoaded:function(){this._attached&&(this.trigger(r.JWPLAYER_MEDIA_BUFFER_FULL),this.startTimeTicker())},sdkStateChanged:function(t){if(this._attached)if(t=h[t],t==n.COMPLETE&&this.state!==n.IDLE&&this.state!==n.COMPLETE){if(this._beforecompleted=!0,!this._attached)return;this._playbackComplete()}else this.setState(t),t===n.PLAYING&&this.trigger(r.JWPLAYER_PROVIDER_FIRST_FRAME,{})},sdkStartOnSeek:function(t){this._attached&&(this._position=t,this._currentTime=t,this._restorePosition=t)},sdkMetadata:function(t){t.seekRange=this._seekableRange,this.trigger(r.JWPLAYER_MEDIA_META,{metadata:t,drm:this._currentItem.useswidevine?"widevine":void 0})},sdkFirstFrame:function(){this.trigger(r.JWPLAYER_PROVIDER_FIRST_FRAME,{})},sdkQualityLevels:function(t,e){this._multipleSource||(this._levels=t,this.trigger(r.JWPLAYER_MEDIA_LEVELS,{levels:t,currentQuality:e}),this._currentQuality!=-1&&this._currentQuality!=e&&this.setCurrentQuality(this._currentQuality))},sdkQualityChanged:function(t,e){this.trigger(r.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:e,levels:t})},sdkSeeked:function(t){this.trigger(r.JWPLAYER_MEDIA_SEEKED,{position:t})},sdkSeekableRangeChanged:function(t,e){this._seekableRange={start:t,end:e}},sdkAudioTracks:function(t,e){this._tracks=t,this.trigger(r.JWPLAYER_AUDIO_TRACKS,{tracks:t,currentTrack:e}),this._handleMediaType()},sdkAudioTrackChange:function(t,e){this.trigger(r.JWPLAYER_AUDIO_TRACK_CHANGED,{tracks:t,currentTrack:e})},sdkSubtitlesTracks:function(t,e){this.trigger("subtitlesTracks",{tracks:t,currentTrack:e})},sdkSubtitlesTracksChange:function(t,e){this.trigger("subtitlesTracksChange",{tracks:t,currentTrack:e})},sdkVisualQuality:function(t,e,i){this.trigger("visualQuality",{mode:t,level:e,reason:i})},sdkPlayAttempt:function(){this.trigger(r.JWPLAYER_MEDIA_PLAY_ATTEMPT,{})},sdkPlaybackRateChanged:function(t){this.trigger("ratechange",{playbackRate:t})},sdkWarning:function(t){this.trigger("warning",{message:t})},sdkError:function(t,e){this.trigger(r.JWPLAYER_MEDIA_ERROR,{key:t,exceptionIdentifier:e,code:"303200"})},sdkStartTimers:function(){this.startTimeTicker()},sdkStopTimers:function(){this.stopTickers()},sdkCastingChanged:function(e){i.toggleClass(t().getContainer(),"jw-flag-casting",e)}},{_getPublicLevels:function(t){var e;return e=s.map(t,function(t,e){return{label:t.label||e}})},_setLevels:function(t){this._levels=t,this._currentQuality=this._pickInitialQuality(t);var e=this._getPublicLevels(t);e&&this.trigger(r.JWPLAYER_MEDIA_LEVELS,{levels:e,currentQuality:this._currentQuality})},_pickInitialQuality:function(t){var e=Math.max(0,this._currentQuality),i=d.qualityLabel,s=!1;if(t)for(var r=0;r<t.length;r++)if(t[r].default&&(s=!0,e=r),i&&t[r].label===i)return r;return s?e:0},_completeLoad:function(t,e){var i,s=!t.preload||"none"!=t.preload;this._multipleSource?(this._setLevels(t.sources),i=this._levels[this._currentQuality]):(this._setLevels([]),i=t.sources[0]),_lastSeeked=null,this._playlistItemChanged(t)&&(this._previouslyLoadedItem=this._currentItem||t,this.stopTickers(),a.load(this._providerId,i.file,i.type,JSON.stringify(this._previouslyLoadedItem,function(t,e){if("vastAd"!==t)return e}),JSON.stringify(i.httpheaders),t.hasimapreroll,e,s,this._currentPlaybackRate),this._currentItem=t)},_playbackComplete:function(){this._currentItem=null,this._beforecompleted=!1,this._position=-1,this._currentTime=-1,this._restorePosition=-1,this._bufferPercentage=0,this.trigger(r.JWPLAYER_MEDIA_COMPLETE)},_playlistItemChanged:function(t){return t!==this._currentItem},_handleMediaType:function(){if("hls"===this._currentItem.sources[0].type){var t="video";!this._levels.length&&this._tracks.length&&(t="audio"),this.trigger(r.JWPLAYER_MEDIA_TYPE,{mediaType:t})}}}),window.jwOn("itemLoaded",this._providerId,this.sdkItemLoaded.bind(this)),window.jwOn("playbackRateChanged",this._providerId,this.sdkPlaybackRateChanged.bind(this)),window.jwOn("stateChange",this._providerId,this.sdkStateChanged.bind(this)),window.jwOn("startOnSeek",this._providerId,this.sdkStartOnSeek.bind(this)),window.jwOn("seekableRangeChanged",this._providerId,this.sdkSeekableRangeChanged.bind(this)),window.jwOn("metadata",this._providerId,this.sdkMetadata.bind(this)),window.jwOn("firstFrame",this._providerId,this.sdkFirstFrame.bind(this)),window.jwOn("qualityLevels",this._providerId,this.sdkQualityLevels.bind(this)),window.jwOn("qualityChanged",this._providerId,this.sdkQualityChanged.bind(this)),window.jwOn("visualQuality",this._providerId,this.sdkVisualQuality.bind(this)),window.jwOn("audioTracks",this._providerId,this.sdkAudioTracks.bind(this)),window.jwOn("audioTrackChanged",this._providerId,this.sdkAudioTrackChange.bind(this)),window.jwOn("subtitlesTracks",this._providerId,this.sdkSubtitlesTracks.bind(this)),window.jwOn("subtitlesTrackChanged",this._providerId,this.sdkSubtitlesTracksChange.bind(this)),window.jwOn("seeked",this._providerId,this.sdkSeeked.bind(this)),window.jwOn("playAttempt",this._providerId,this.sdkPlayAttempt.bind(this)),window.jwOn("warning",this._providerId,this.sdkWarning.bind(this)),window.jwOn("error",this._providerId,this.sdkError.bind(this)),window.jwOn("startTimers",this._providerId,this.sdkStartTimers.bind(this)),window.jwOn("stopTimers",this._providerId,this.sdkStopTimers.bind(this)),window.jwOn("castingChanged",this._providerId,this.sdkCastingChanged.bind(this)),this.renderNatively=!1,this.trigger=function(t,e){if(this._attached)return _.trigger.call(this,t,e)},this.timeTicker,this.bufferTicker}var i=t.utils,s=t._,r=t.events,n=r.state,a=window.SDKRouter,h={};h["states.LOADING"]=n.LOADING,h["states.BUFFERING"]=n.BUFFERING,h["states.STALLED"]=n.STALLED,h["states.PLAYING"]=n.PLAYING,h["states.PAUSED"]=n.PAUSED,h["states.IDLE"]=n.IDLE,h["states.COMPLETE"]=n.COMPLETE,t.utils.isYouTube=t._.constant(!1);var o="SDKProvider",u=0;e.supports=function(t){return a.supports(JSON.stringify(t))},e.getName=function(){return{name:o}},t.api.registerProvider(e)}(jwplayer);
